<html>
  <head>
  <title>Mapbox Basemaps</title>

	<meta charset="utf-8" />
  
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	
	<!--Font Awesome CDN and Bootstrap CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
	

	<!-- Mapbox JS -->
	<script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.5/mapbox.js'></script>
	<link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.5/mapbox.css' rel='stylesheet' />

	
	<!--Home Button ie Default Extent -->
	<link rel="stylesheet" href="../plugins/leaflet.defaultextent.css" />
	<script src="../plugins/leaflet.defaultextent.js"></script>
	
	<!--Easy Print Plugin Does not work well -->
	<script src="../plugins/leaflet.easyPrint.js"></script>
	<link rel="stylesheet" href="../plugins/easyPrint.css" />
	<script src="../plugins/jQuery.print.js"></script>
	
	<!--Locate Control Plugin Mapbox CDN Version -->
	<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.24.0/L.Control.Locate.js'></script>
	<link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.24.0/L.Control.Locate.css' rel='stylesheet' />
	<!--[if lt IE 9]>
	<link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.21.0/L.Control.Locate.ie.css' rel='stylesheet' />
	<![endif]-->

	<!--Awesome Marker Plugin -->
	<link rel="stylesheet" href="../plugins/leaflet.awesome-markers.css">
	<script src="../plugins/leaflet.awesome-markers.js"></script>
	
	<!--Leaflet Hash via Mapbox CDN-->
	<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-hash/v0.2.1/leaflet-hash.js'></script>
	
	<!-- Leafle Social -->	
	<link rel="stylesheet" href="../plugins/leaflet.social.css" />
	<script src="../plugins/leaflet.social.js"></script>
	
	<!--Google Custom Map with locked ovrdc API -->
	<script type="text/javascript"
	src="https://maps.googleapis.com/maps/api/js?libraries=placeskey=AIzaSyCpIjH_d3jfNPSwPuyrzy2G9H_Ylb1bEd8">
	</script>
	<script src="../plugins/google.js"></script>
	<script src="../plugins/mapstyles/ggle_grey.js"</script>
	
	<!-- Esri Leaflet Core -->
	<script src="http://cdn-geoweb.s3.amazonaws.com/esri-leaflet/0.0.1-beta.5/esri-leaflet-core.js"></script>
	<script src="http://cdn-geoweb.s3.amazonaws.com/esri-leaflet/0.0.1-beta.5/esri-leaflet.js"></script>

	<!-- Esri Leaflet Geocoder -->
	<script src="http://cdn-geoweb.s3.amazonaws.com/esri-leaflet-geocoder/0.0.1-beta.3/esri-leaflet-geocoder.js"></script>
	<!--link rel="stylesheet" type="text/css" href="http://cdn-geoweb.s3.amazonaws.com/esri-leaflet-geocoder/0.0.1-beta.3/esri-leaflet-geocoder.css"-->
	
	<link rel="stylesheet" type="text/css" href="../plugins/esri-geo/esri-leaflet-geocoder.css" />
	
	<!-- Full Screen via Mapbox-->
	<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v0.0.4/Leaflet.fullscreen.min.js'></script>
	<link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v0.0.4/leaflet.fullscreen.css' rel='stylesheet' />
	
	<!-- Leaflet Omnivore Plugin GeoJson KML Etc -->
	<script src='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>
  
	<!-- leaflet measure -->
	<link rel="stylesheet" href="../plugins/leaflet.measure.css" />
	<script src="../plugins/leaflet.measure.js"></script>
  
  	<!-- leaflet sidebar v 2 -->
  	<link rel="stylesheet" href="../plugins/leaflet-sidebar.css" />
  	<script src="../plugins/leaflet-sidebar.js"></script>
  	
  	<!-- leaflet ajax geojson loader -->
  	<script src="../plugins/leaflet.ajax.min.js"></script>
  	
  	<!-- leaflet panel layers right side panel -->
  	<link rel="stylesheet" href="../plugins/leaflet-panel-layers.css" />
  	<script src="../plugins/leaflet-panel-layers.js"></script>

	<style>
		#map { position:absolute; top:0; bottom:0; width:100%; }
	</style>

  </head>
  <body>

    <div id="sidebar" class="sidebar collapsed">
        <!-- Nav tabs -->
        <ul class="sidebar-tabs" role="tablist">
            <li><a href="#home" role="tab"><i class="fa fa-bars"></i></a></li>
        </ul>

        <!-- Tab panes -->
        <div class="sidebar-content active">
            	<div class="sidebar-pane" id="home">
                	<h1>Mapbox Basemaps</h1>
				</div>
        </div>
    </div>
    
    <div id="map" class="sidebar-map"></div>
    <script>

    L.mapbox.accessToken = 'pk.eyJ1Ijoib3ZyZGMiLCJhIjoiRUtXeFFzZyJ9.ufnW36oCZo96m_L9QsAkYg'

      function main() {
        var map = new L.Map('map', {
          center: [39.592, -82.595],
          zoom: 15,
          measureControl: true
        });
        
        var hash = L.hash(map);

        var streets = L.mapbox.tileLayer('mapbox.streets').addTo(map);

		var light = L.mapbox.tileLayer('mapbox.light', {
   		 attribution: '<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'
		});

		var dark = L.mapbox.tileLayer('mapbox.dark', {
   		 attribution: '<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'
		});

		var satellite = L.mapbox.tileLayer('mapbox.satellite', {
   		 attribution: '<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'
		});

		var satellite2 = L.mapbox.tileLayer('mapbox.streets-satellite', {
   		 attribution: '<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'
		});

		 var wheat = L.mapbox.tileLayer('mapbox.wheatpaste', {
   		 attribution: '<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'
		});

		var basic = L.mapbox.tileLayer('mapbox.streets-basic', {
   		 attribution: '<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'
		});

		var comic = L.mapbox.tileLayer('mapbox.comic', {
   		 attribution: '<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'
		});

		var outdoors = L.mapbox.tileLayer('mapbox.outdoors', {
   		 attribution: '<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'
		});

		var hike = L.mapbox.tileLayer('mapbox.run-bike-hike', {
   		 attribution: '<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'
		});
		
		var pencil = L.mapbox.tileLayer('mapbox.pencil', {
   		 attribution: '<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'
		});

		var pirates = L.mapbox.tileLayer('mapbox.pirates', {
   		 attribution: '<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'
		});

		var emerald = L.mapbox.tileLayer('mapbox.emerald', {
   		 attribution: '<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'
		});

		var contrast = L.mapbox.tileLayer('mapbox.high-contrast', {
   		 attribution: '<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'
		});

        var trails = omnivore.geojson('../data/cc-trails.geojson').addTo(map);
     	
        function addLayerControl() {
	     	var baseLayers = [
	     		{
       	          	name: "Streets",
       	          	layer: streets
	     		},
	     		{
	     			name: "light",
	     			layer: light
	     		},
	     		{
	     			name: "dark",
	     			layer: dark
	     		},
	     		{
	     			name: "Satellite",
	     			layer: satellite
	     		},
	     			     		{
	     			name: "Satellite Streets",
	     			layer: satellite2
	     		},
	     		{
	     			name: "wheat",
	     			layer: wheat
	     		},
	     			     		{
	     			name: "basic",
	     			layer: basic
	     		},
	     			     		{
	     			name: "comic",
	     			layer: comic
	     		},
	     			     		{
	     			name: "outdoors",
	     			layer: outdoors
	     		},
	     			     		{
	     			name: "Run Bike Hike",
	     			layer: hike
	     		},
	     			     		{
	     			name: "pencil",
	     			layer: pencil
	     		},
	     			     		{
	     			name: "pirates",
	     			layer: pirates
	     		},
	     			     		{
	     			name: "emerald",
	     			layer: emerald
	     		},
	     			     		{
	     			name: "contrast",
	     			layer: contrast
	     		}
	     		];
	     		
	     		var overLayers = [
	     			{
	     				name: "Trails",
	     				icon: '<i class="fa fa-minus" style="color: blue; padding=2px;"></i>',
	     				layer: trails
	     			}
	     			];

		var panel1 = new L.Control.PanelLayers(baseLayers, overLayers, {autoZIndex: true, collapsed: false}).addTo(map);
               	panel1.bringToFront();
        };

        L.control.layers({
			    'Streets': streets,
			    'Light': light,
			    'Dark': dark,
			    'Satellite': satellite,
			    'Satellite2': satellite2,
			    'Wheat': wheat,
			    'Basic': basic,
			    'Comic': comic,
			    'outdoors': outdoors,
			    'run-bike-hike': hike,
			    'Pencil': pencil,
			    'Pirates': pirates,
			    'Emerald': emerald,
			    'contrast': contrast
			}, {
			    'Trails': trails
			}, {collapsed: false}).addTo(map);


//Everything Below here is various controls and other stuff

	L.control.defaultExtent().addTo(map);
	L.control.locate().addTo(map);
//	L.control.scale().addTo(map); gets in the way of the carto db/google logos
	L.control.fullscreen().addTo(map);
//	L.control.social({default_text: "Map from OVRDC via GitHub"}).addTo(map); Wellston doesnt need social sharing
	var sidebar = L.control.sidebar('sidebar').addTo(map);

// conflicts with measure control
//	map.on('click', function(e) { alert("Lat, Lon : " + e.latlng.lat + ", " + e.latlng.lng) });
	
	
      // create the geocoding control and add it to the map
      var searchControl = new L.esri.Controls.Geosearch({
      	position: 'topleft'
      }).addTo(map);

      // create an empty layer group to store the results and add it to the map
      var results = new L.LayerGroup().addTo(map);

      // listen for the results event and add every result to the map
      searchControl.on("results", function(data){
        results.clearLayers();
        for (var i = data.results.length - 1; i >= 0; i--) {
          results.addLayer(L.marker(data.results[i].latlng));
        };
      });
      
      }

      // you could use $(window).load(main);
      window.onload = main;
    </script>
  </body>
</html>
